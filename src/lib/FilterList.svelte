<script lang="ts">
	import { page } from '$app/stores';
	import { makeFilterUrl } from '$lib/api';
	export let filters = [] as { id: string; items: any[]; title: string }[];
	$: query = new URLSearchParams($page.query);
	$: path = $page.path;
	$: url = makeFilterUrl(path, query);
</script>

<p class="filter-list">
	{#each filters as filter}
		<span class="facet">{filter.title}:</span>
		{#each filter?.items as item}
			<span class="pill">
				<span>{item.display_name}</span>
				<a sveltekit:noscroll class="remove" href={url(filter.id, item.name)} title="Entfernen">
					<svg width="18" height="18" viewBox="0 0 1001 1001">
						<path
							d="M500.5 1001C224.0333333333333 1001 0 776.9666666666667 0 500.5S224.0333333333333 0 500.5 0S1001 224.0333333333333 1001 500.5S776.9666666666667 1001 500.5 1001zM500.5 47.6666666666667C252.6333333333334 47.6666666666667 47.6666666666667 252.6333333333335 47.6666666666667 500.5C47.6666666666667 748.3666666666667 252.6333333333334 953.3333333333334 500.5 953.3333333333334S953.3333333333331 748.3666666666667 953.3333333333331 500.5C953.3333333333331 252.6333333333335 748.3666666666666 47.6666666666667 500.5 47.6666666666667zM686.4 653.0333333333333L533.8666666666666 500.5L686.3999999999999 347.9666666666667C695.9333333333332 338.4333333333334 695.9333333333332 324.1333333333335 686.3999999999999 314.6000000000002C681.6333333333332 309.8333333333335 676.8666666666666 309.8333333333335 667.3333333333333 309.8333333333335S653.0333333333332 309.8333333333335 648.2666666666665 314.6000000000002L495.7333333333332 467.1333333333334L347.9666666666666 319.3666666666668C343.2 314.6000000000002 338.4333333333333 314.6000000000002 328.8999999999999 314.6000000000002S314.5999999999999 314.6000000000002 309.8333333333333 319.3666666666668C300.2999999999999 328.9000000000001 300.2999999999999 343.2000000000001 309.8333333333333 352.7333333333334L457.5999999999999 500.5L314.6 648.2666666666667C305.0666666666666 657.8 305.0666666666666 672.1 314.6 681.6333333333333S338.4333333333333 691.1666666666667 347.9666666666667 681.6333333333333L495.7333333333333 533.8666666666667L648.2666666666667 686.4C657.8 695.9333333333334 672.1 695.9333333333334 681.6333333333333 686.4S695.9333333333333 662.5666666666667 686.4 653.0333333333333z"
						/>
					</svg>
				</a>
			</span>
		{/each}
	{/each}
</p>

<style>
	.pill {
		border: 1px solid var(--color-zuriblau);
		padding: 0.25em 0.5em 0.25rem 0.75rem;
		margin-right: 0.25em;
		margin-top: 0.25em;
		display: inline-flex;
		align-items: center;
		white-space: nowrap;
		color: var(--color-zuriblau);
		border-radius: 100vh;
	}
	.remove {
		display: inline-flex;
		padding-left: 0.5rem;
	}
</style>
